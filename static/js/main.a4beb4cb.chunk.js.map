{"version":3,"sources":["components/Header/Header.jsx","redux/types.js","components/Order/Order.jsx","redux/actions.js","components/Popup/Popup.jsx","components/OrderListPopup/OrderListPopup.jsx","components/SingleOrder/SingleOrder.jsx","components/OrderItemPopup/OrderItemPopup.jsx","components/App/App.jsx","reportWebVitals.js","redux/cardsReducer.js","redux/singleOrder.js","redux/rootReducer.js","redux/sagas.js","redux/store.js","index.js"],"names":["Header","className","REQUEST_CARDS","FETCH_CARDS","SHOW_ORDER","Order","openOrderItem","item","number","sale","goods","date","discount","titles","Map","map","id","values","dispatch","useDispatch","onClick","type","payload","showOrderPopup","Math","round","calendar","sameDay","nextDay","sameElse","length","Popup","children","isOpen","OrderListPopup","cards","SingleOrder","count","price","name","realPrice","OrderItemPopup","onclose","singleOrder","React","useState","Number","isTotalPrice","setIsTotalPrice","isTotalPercentSale","setIsTotalPercentSale","useEffect","reduce","prev","next","realSale","totalPercentSale","totalPrice","numberFormatter","i","App","isOrderListPopupOpen","isOrderItemPopupOpen","setIsOrderItemPopupOpen","useSelector","state","fetchedCards","order","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","rootReducer","combineReducers","action","sagaWatcher","sagaWorker","takeEvery","call","fetchCards","put","console","log","message","a","fetch","response","json","saga","createSagaMiddleware","store","createStore","compose","applyMiddleware","window","__REDUX_DEVTOOLS_EXTENSION__","run","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a4beb4cb.chunk.js","sourcesContent":["import React from 'react';\nimport './Header.css';\n\nfunction Header() {\n\n  return (\n    <header className=\"header\">\n      <button className=\"header__burger\" ></button>\n    </header>\n  );\n}\n\nexport default Header;\n","export const REQUEST_CARDS = 'GET/REQUEST_CARDS';\nexport const FETCH_CARDS = 'POST/FETCH_CARDS';\nexport const SHOW_ORDER = 'ORDER/SHOW_ORDER';\n","import React from 'react';\nimport './Order.css';\nimport Moment from 'react-moment';\nimport { useDispatch } from 'react-redux';\nimport { showOrderPopup } from '../../redux/actions';\n\nfunction Order({ openOrderItem, item }) {\n  const { number, sale, goods, date } = item;\n  const discount = sale * 38.17;\n  const titles = [...new Map(goods.map((item) => [item.id, item])).values()];\n  const dispatch = useDispatch();\n  function handleClickOpen() {\n    openOrderItem();\n    dispatch(showOrderPopup(item))\n  }\n\n  const calendarStrings = {\n    sameDay: '[Сегодня:] hh:mm',\n    nextDay: '[Завтра:] hh:mm',\n    sameElse: 'DD.MM.YY: HH:MM',\n  };\n\n  return (\n    <li className=\"order\" onClick={handleClickOpen}>\n      <div className=\"order__number-container\">\n        <h2 className=\"order__number\">Заказ №{number}</h2>\n        <p className=\"order__sale\">{Math.round(discount)} Р</p>\n      </div>\n      {date ? (\n        <p className=\"order__delivery\">\n          <Moment calendar={calendarStrings}>{date}</Moment>\n        </p>\n      ) : (\n        <p className=\"order__delivery\">Заказ не готов</p>\n      )}\n      <ul className=\"order__subtitle-container\">\n        <li className=\"order__subtitle\">&#x2219; товаров {goods.length} шт.</li>\n        <li className=\"order__subtitle\">\n          &#8729; наименований {titles.length} шт\n        </li>\n      </ul>\n    </li>\n  );\n}\n\nexport default Order;\n","import {\n  REQUEST_CARDS,\n  SHOW_ORDER,\n} from './types';\n\nexport function requestCards() {\n  return {\n    type: REQUEST_CARDS,\n  };\n}\n\nexport function showOrderPopup(item) {\n  return {\n    type: SHOW_ORDER,\n    payload: item,\n  };\n}\n\n\n\n","import React from 'react';\nimport './Popup.css';\n// import Order from '../Order/Order';\n\nfunction Popup({ children, isOpen, className }) {\n  return (\n    <div className={`popup ${isOpen ? className : ''}`}>\n      <div className=\"popup__container\">{children}</div>\n    </div>\n  );\n}\n\nexport default Popup;\n","import React from 'react';\nimport './OrderListPopup.css';\nimport Order from '../Order/Order';\nimport Popup from '../Popup/Popup';\nfunction OrderListPopup({ isOpen, openOrderItem, cards }) {\n\n  return (\n    <Popup isOpen={isOpen} className='popup_opened-orderlist'>\n      <div className=\"orderlist\">\n  <h2 className=\"orderlist__title\">Список заказов</h2>\n  <button className=\"orderlist__btn-filter\"></button>\n\n</div>\n<ul className=\"orderlist__items\">\n  {cards.map((item) => ( <Order openOrderItem={openOrderItem} item={item} key={item.id}/>))}\n\n\n\n  </ul>\n    </Popup>\n  );\n}\n\nexport default OrderListPopup;\n","import React from 'react';\nimport './SingleOrder.css';\n\nfunction SingleOrder({ item }) {\n  const { count, price, name } = item;\n  const realPrice = price * 38.17;\n\n\n  return (\n    <li className=\"singleorder\">\n<div className=\"singleorder__container\">\n          <p className=\"singleorder__title\">{name}</p>\n          <p className=\"singleorder__count\">Количество {count} шт</p>\n        </div>\n        <p className=\"singleorder__price\">{Math.round(realPrice)} Р</p>\n    </li>\n  );\n}\n\nexport default SingleOrder;\n","import React from 'react';\nimport './OrderItemPopup.css';\nimport Popup from '../Popup/Popup';\nimport SingleOrder from '../SingleOrder/SingleOrder';\nimport Moment from 'react-moment';\nimport numberFormatter from 'number-formatter';\nfunction OrderItemPopup({ isOpen, onclose, singleOrder }) {\n  const { number, date, goods, sale } = singleOrder;\n  const [isTotalPrice, setIsTotalPrice] = React.useState(Number);\n  const [isTotalPercentSale, setIsTotalPercentSale] = React.useState(Number);\n  React.useEffect(() => {\n    if (isOpen) {\n      const price = singleOrder.goods.reduce(\n        (prev, next) => prev + next.price * 38.17,\n        0\n      );\n\n      const realSale = sale * 38.17;\n      const totalPercentSale = 100 / (price / realSale);\n      const totalPrice = price - realSale;\n      setIsTotalPercentSale(numberFormatter('#.#', totalPercentSale));\n      setIsTotalPrice(numberFormatter('# ###.##', totalPrice));\n    }\n  }, [isOpen, singleOrder, sale]);\n\n  function handleClosePopup() {\n    onclose();\n  }\n  const calendarStrings = {\n    sameDay: 'hh:mm [Сегодня]',\n    nextDay: 'hh:mm [Завтра]',\n    sameElse: 'HH:MM DD.MM.YY',\n  };\n\n  return (\n    <Popup isOpen={isOpen} className=\"popup_opened-orderitem\">\n      <div className=\"orderitem\">\n        <div className=\"orderitem__container-number\">\n          <p className=\"orderitem__title\">Заказ №{number}</p>\n          {date ? (\n            <p className=\"orderitem__subtitle\">\n              <Moment\n                calendar={calendarStrings}\n                className=\"orderitem__subtitle\"\n              >\n                {date}\n              </Moment>\n            </p>\n          ) : (\n            <p className=\"orderitem__subtitle\">Заказ на сборке</p>\n          )}\n        </div>\n        <button\n          className=\"orderitem_btn-close\"\n          onClick={handleClosePopup}\n          type=\"button\"\n        ></button>\n        <div className=\"orderitem__container-example\">\n          <p className=\"orderitem__title-example\">Товар</p>\n          <p className=\"orderitem__subtitle-example\">\n            Название наименование товара\n          </p>\n        </div>\n\n        <ul className=\"orderitem-list\">\n          {goods\n            ? goods.map((item, i) => (\n                <SingleOrder\n                  item={item}\n                  key={i}\n                /> /* индекс не используется для значений key, но тут кривой бэк и для работоспособности прототипа я считаю допустимо  */\n              ))\n            : 'Заказ пуст'}\n        </ul>\n        <div className=\"orderitem__container-summary\">\n          <p className=\"orderitem__summary-title\">\n            Скидка по заказу составила {isTotalPercentSale} %\n          </p>\n          <button className=\"orderitem__summary-btn\" type=\"button\">\n            ИТОГО : {isTotalPrice}\n          </button>\n          <p className=\"orderitem__summary-subtitle\">\n            Дата выдачи заказа 10 дней с момента оплаты\n          </p>\n        </div>\n      </div>\n    </Popup>\n  );\n}\n\nexport default OrderItemPopup;\n","import React from 'react';\nimport './App.css';\nimport Header from '../Header/Header';\nimport OrderListPopup from '../OrderListPopup/OrderListPopup';\nimport OrderItemPopup from '../OrderItemPopup/OrderItemPopup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { requestCards } from '../../redux/actions';\nfunction App() {\n  const [isOrderListPopupOpen, setIsOrderListPopupOpen] = React.useState(true); // default true потому что так задумано в макете\n  const [isOrderItemPopupOpen, setIsOrderItemPopupOpen] = React.useState(false);\n\n  function openOrderItem() {\n    setIsOrderItemPopupOpen(true);\n  }\n\n  function handleCloseOrderItem() {\n    setIsOrderItemPopupOpen(false);\n  }\n\n  const dispatch = useDispatch();\n\n  const cards = useSelector((state) => state.cards.fetchedCards);\n  const singleOrder = useSelector((state) => state.order.singleOrder);\n\n  React.useEffect(() => {\n    dispatch(requestCards());\n  }, [dispatch]);\n\n\n\n  return (\n    <div className=\"page\">\n\n      <div className=\"page__container\">\n        <Header  />\n        <OrderListPopup\n          isOpen={isOrderListPopupOpen}\n          openOrderItem={openOrderItem}\n          cards={cards}\n        />\n        <OrderItemPopup\n          isOpen={isOrderItemPopupOpen}\n          onclose={handleCloseOrderItem}\n          singleOrder={singleOrder}\n        />\n      </div>\n\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { FETCH_CARDS } from './types';\n\nconst initialState = {\n\tfetchedCards: [],\n};\n\nexport const cardsReducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase FETCH_CARDS:\n\t\t\treturn { ...state, fetchedCards: action.payload };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};","import { SHOW_ORDER } from './types';\n\nconst initialState = {\n\tsingleOrder: [],\n};\n\nexport const orderReducer = (state = initialState, action) => {\n\tswitch (action.type) {\n\t\tcase SHOW_ORDER:\n\t\t\treturn { ...state, singleOrder: action.payload };\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};","import { combineReducers } from 'redux';\nimport { cardsReducer } from './cardsReducer';\nimport { orderReducer } from './singleOrder';\n\nexport const rootReducer = combineReducers({\n\tcards: cardsReducer,\n  order: orderReducer,\n\n});","import { call, put, takeEvery } from '@redux-saga/core/effects';\nimport { REQUEST_CARDS, FETCH_CARDS } from './types';\n\nexport function* sagaWatcher() {\n  yield takeEvery(REQUEST_CARDS, sagaWorker);\n}\n\nfunction* sagaWorker() {\n  try {\n    // add loader\n    const payload = yield call(fetchCards);\n    yield put({ type: FETCH_CARDS, payload });\n    // remove loader\n  } catch (err) {\n    console.log({ message: err.message });\n  }\n}\n\n// перенести в Api.js\nexport async function fetchCards() {\n  const response = await fetch('https://u38027.netangels.ru/api/orders.php');\n  return await response.json();\n}","import { applyMiddleware, compose, createStore } from 'redux';\nimport createSagaMiddleware from '@redux-saga/core';\nimport { rootReducer } from './rootReducer';\nimport { sagaWatcher } from './sagas';\n\nconst saga = createSagaMiddleware();\n\nexport const store = createStore(\n  rootReducer,\n  compose(\n    applyMiddleware(saga),\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n  )\n);\n\nsaga.run(sagaWatcher);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux';\nimport { store } from './redux/store';\nReactDOM.render(\n  <React.StrictMode>\n<Provider store={store}>\n    <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}